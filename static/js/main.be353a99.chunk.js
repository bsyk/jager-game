(this["webpackJsonpjager-game"]=this["webpackJsonpjager-game"]||[]).push([[0],{27:function(e,t,a){"use strict";(function(e){var n=a(8),r=a(3),c=a(7),o=a(0),l=a.n(o),i=a(55),s=a(56),u=a(57),m=a(58),p=a(59),d=a(60),f=(a(48),a(28)),b=a(33),g=a(34),h=a(61),v=function(e,t){var a=localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(n){console.error("Can't parse value from localstorage, using default",n)}return t},O=function(e,t){localStorage.setItem(e,JSON.stringify(t))},y=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e};t.a=function(){var t={name:""},a="Click to copy link",E=v("playerList",[Object(r.a)({},t),Object(r.a)({},t),Object(r.a)({},t)]),j=v("allocations",[]),w=v("gameOptions",{slotsPerPlayer:2,gameLength:5400,perHalf:!1}),k=v("viewOptions",{minutes:!1,surprise:!1}),N=!!E.length&&E.every((function(e){return!!e.name.trim().length})),C=!!j.length,S=!!window.location.hash,P=C||S,x=!S&&!N,L=Object(o.useState)(E),A=Object(n.a)(L,2),T=A[0],W=A[1],I=Object(o.useState)(x),J=Object(n.a)(I,2),M=J[0],R=J[1],F=Object(o.useState)(P),H=Object(n.a)(F,2),B=H[0],U=H[1],G=Object(o.useState)(w),$=Object(n.a)(G,2),q=$[0],z=$[1],D=Object(o.useState)(k),K=Object(n.a)(D,2),Q=K[0],V=K[1],X=Object(o.useState)(a),Y=Object(n.a)(X,2),Z=Y[0],_=Y[1],ee=Object(o.useState)(!1),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],re=function(){if(window.location.hash)try{var t=window.location.hash,a=JSON.parse(e.from(t,"base64")),r=Object(n.a)(a,3),o=r[0],l=r[1],i=r[2];return{gameLength:o,playerNames:l,allocationOrder:i,slotCount:i.length}}catch(f){console.error("Error decoding game",f)}var s=T.length,u=q.slotsPerPlayer,m=q.gameLength,p=s*u,d=function(e,t,a){if(a)return Object(c.a)(Array(t)).reduce((function(t){return[].concat(Object(c.a)(t),Object(c.a)(y(Object(c.a)(Array(e)).map((function(t,a){return a%e})))))}),[]);var n=e*t;return y(Object(c.a)(Array(n)).map((function(t,a){return a%e})))}(s,u,q.perHalf);return{gameLength:m,playerNames:T.map((function(e){return e.name})),allocationOrder:d,slotCount:p}},ce=function(){var e=re(),t=e.gameLength,a=e.playerNames,n=e.allocationOrder,o=e.slotCount,l=t/2,i={start:l,end:l,label:"Half Time",type:"marker"},s=Math.round(t/o),u=n.reduce((function(e,t,a){return[].concat(Object(c.a)(e),[{start:a*s,end:(a+1)*s,type:"allocation"}])}),[]);u[o-1].end=t;var m=u.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{},{label:a[n[t]]})})),p=m.findIndex((function(e){return e.start<l&&e.end>l}));if(~p){var d=m.slice(0,p),f=m.slice(p+1),b=Object(r.a)(Object(r.a)({},m[p]),{},{end:l,type:"allocation split"}),g=Object(r.a)(Object(r.a)({},m[p]),{},{start:l,type:"allocation split"});m=[].concat(Object(c.a)(d),[b,i,g],Object(c.a)(f))}else m=[].concat(Object(c.a)(m.slice(0,m.length/2)),[i],Object(c.a)(m.slice(m.length/2)));return{allocations:m,gameLength:t,allocationOrder:n}},oe=(S&&ce()).allocations,le=Object(o.useState)(oe||j),ie=Object(n.a)(le,2),se=ie[0],ue=ie[1],me=function(e){O("playerList",e),W(e)},pe=function(e){me(T.filter((function(t,a){return a!==parseInt(e.currentTarget.dataset.idx)})))},de=function(e){var t=Object(c.a)(T);t[e.target.dataset.idx][e.target.className]=e.target.value,me(t)},fe=function(){var e=Object(r.a)(Object(r.a)({},Q),{},{minutes:!Q.minutes});O("viewOptions",e),V(e)};return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("img",{src:g.a,className:"App-logo",alt:"dinner"})),M?l.a.createElement("div",null,l.a.createElement("p",null,"Who's playing?"),T.map((function(e,t){return l.a.createElement(f.a,{key:"player-".concat(t),idx:t,player:e,onPlayerChange:de,onRemovePlayer:pe})})),l.a.createElement("div",{className:"buttonrow"},l.a.createElement("button",{type:"button",onClick:function(){me([].concat(Object(c.a)(T),[Object(r.a)({},t)]))}},l.a.createElement(i.a,null)),l.a.createElement("button",{type:"button",onClick:function(){R(!1)}},l.a.createElement(s.a,null)))):l.a.createElement("div",null,!B&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Ready to play?"),l.a.createElement("div",null,T.map((function(e){return e.name})).join(", ")),l.a.createElement("div",{className:"buttonrow"},l.a.createElement("label",{htmlFor:"slots"},"Slots per player: ",q.slotsPerPlayer),l.a.createElement("input",{type:"range",id:"slots",min:"1",max:"3",value:q.slotsPerPlayer,onChange:function(e){var t=Object(r.a)(Object(r.a)({},q),{},{slotsPerPlayer:parseInt(e.target.value)});O("gameOptions",t),z(t)},className:"slider"})),q.slotsPerPlayer>1&&l.a.createElement("div",{className:"controlrow"},l.a.createElement("label",null,"Slot per round "),l.a.createElement("label",{className:"switch"},l.a.createElement("input",{type:"checkbox",checked:q.perHalf,onChange:function(e){var t=Object(r.a)(Object(r.a)({},q),{},{perHalf:!!e.target.checked});O("gameOptions",t),z(t)}}),l.a.createElement("span",{className:"toggle"}))),l.a.createElement("div",{className:"controlrow"},l.a.createElement("label",{htmlFor:"len"},"Game length (mins) "),l.a.createElement("input",{type:"number",id:"len",min:"1",step:"1",value:q.gameLength/60,onChange:function(e){var t=Object(r.a)(Object(r.a)({},q),{},{gameLength:60*parseInt(e.target.value)});O("gameOptions",t),z(t)},className:"shortnumber"})),l.a.createElement("div",{className:"controlrow"},l.a.createElement("label",null,"Surprise mode "),l.a.createElement("label",{className:"switch"},l.a.createElement("input",{type:"checkbox",checked:Q.surprise,onChange:function(e){var t=Object(r.a)(Object(r.a)({},Q),{},{surprise:!!e.target.checked});O("viewOptions",t),V(t)}}),l.a.createElement("span",{className:"toggle"}))),l.a.createElement("div",{className:"buttonrow"},l.a.createElement("button",{type:"button",onClick:function(){R(!0)}},l.a.createElement(u.a,null)),l.a.createElement("button",{type:"button",onClick:function(){U(!0);var t=ce(),a=t.allocations,n=t.gameLength,r=t.allocationOrder;O("allocations",a),ue(a);var c=e.from(JSON.stringify([n,T.map((function(e){return e.name})),r])).toString("base64");window.location.hash=c}},l.a.createElement(m.a,null)))),B&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"timeline"},l.a.createElement("ul",null,se.map((function(e,t){var a=e.label,n=e.start,r=e.end,c=e.type;return l.a.createElement(b.a,{key:"row-".concat(t),label:a,start:n,end:r,type:c,idx:t,surprise:Q.surprise,mode:Q.minutes?"minutes":"clock",onTimeClick:fe})})))),l.a.createElement("div",{className:"buttonrow"},l.a.createElement("button",{type:"button",onClick:function(){window.location.hash="";var e=!!E.length&&E.every((function(e){return!!e.name.trim().length}));R(!e),U(!1)}},l.a.createElement(p.a,null)),l.a.createElement(h.a,{open:ae,title:Z},l.a.createElement("button",{type:"button",onClick:function(){navigator.clipboard?(navigator.clipboard.writeText(window.location.href),_("Copied to clipboard"),ne(!0)):(_("Not copied!"),ne(!0)),setTimeout((function(){ne(!1),_(a)}),2e3)}},l.a.createElement(d.a,null)))))))}}).call(this,a(44).Buffer)},28:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(54);t.a=function(e){var t=e.idx,a=e.player,n=e.onPlayerChange,o=e.onRemovePlayer,l="name-".concat(t);return r.a.createElement("div",{key:"Player-".concat(t),className:"inputrow"},r.a.createElement("label",{htmlFor:l},"Player #".concat(t+1)),r.a.createElement("input",{type:"text",name:l,"data-idx":t,id:l,className:"name",value:a.name,onChange:n}),r.a.createElement("button",{type:"button",className:"delete","data-idx":t,onClick:o},r.a.createElement(c.a,null)))}},33:function(e,t,a){"use strict";var n=a(8),r=a(0),c=a.n(r);t.a=function(e){var t=e.idx,a=e.label,o=e.start,l=e.end,i=e.type,s=e.surprise,u=e.mode,m=e.onTimeClick,p=Object(r.useState)(!s),d=Object(n.a)(p,2),f=d[0],b=d[1],g=null,h=function(e){return"minutes"===u?function(e){var t=Math.floor(e/60),a=e-60*t;return"".concat(t,"m ").concat(a,"s")}(e):function(e){var t=Math.floor(e/3600),a=Math.floor((e-60*t*60)/60);return[t,a,e-(60*t*60+60*a)].map((function(e){return(""+e).padStart(2,"0")})).join(":")}(e)};return"marker"===i?c.a.createElement("li",{key:"marker-".concat(t)},c.a.createElement("div",{className:"markertitle"},"".concat(a)),c.a.createElement("div",{className:"markernumber"},c.a.createElement("span",{onClick:m},"".concat(h(o))))):c.a.createElement("li",{key:"player-".concat(t),className:"".concat(s&&f?"reveal":"")},c.a.createElement("div",{className:"line"}),c.a.createElement("div",{className:"title",onClick:function(){s&&(b(!0),g&&(clearTimeout(g),g=null),g=setTimeout((function(){return b(!1)}),5e3))}},"".concat(f?a:"Tap to reveal")),c.a.createElement("div",{className:"number"},c.a.createElement("span",{onClick:m},"".concat(h(o))),c.a.createElement("span",{onClick:m},"".concat(h(l)))))}},34:function(e,t,a){"use strict";t.a=a.p+"static/media/dinner.029cd2f5.png"},43:function(e,t,a){},48:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(43),a(27)),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(l.a,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()}},[[53,1,2]]]);
//# sourceMappingURL=main.be353a99.chunk.js.map