(this["webpackJsonpjager-game"]=this["webpackJsonpjager-game"]||[]).push([[0],{18:function(e,t,a){},19:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=(a(18),a(5)),i=a(4),s=a(1),u=a(37),m=a(38),d=a(39),p=a(40),b=a(41),f=(a(19),a(36)),v=function(e){var t=e.idx,a=e.player,n=e.onPlayerChange,c=e.onRemovePlayer,l="name-".concat(t);return r.a.createElement("div",{key:"Player-".concat(t),className:"inputrow"},r.a.createElement("label",{htmlFor:l},"Player #".concat(t+1)),r.a.createElement("input",{type:"text",name:l,"data-idx":t,id:l,className:"name",value:a.name,onChange:n}),r.a.createElement("button",{type:"button",className:"delete","data-idx":t,onClick:c},r.a.createElement(f.a,null)))},g=function(e){var t=e.idx,a=e.label,c=e.start,l=e.end,o=e.type,s=e.surprise,u=e.mode,m=e.onTimeClick,d=Object(n.useState)(!s),p=Object(i.a)(d,2),b=p[0],f=p[1],v=null,g=function(e){return"minutes"===u?function(e){var t=Math.floor(e/60),a=e-60*t;return"".concat(t,"m ").concat(a,"s")}(e):function(e){var t=Math.floor(e/3600),a=Math.floor((e-60*t*60)/60);return[t,a,e-(60*t*60+60*a)].map((function(e){return(""+e).padStart(2,"0")})).join(":")}(e)};return"marker"===o?r.a.createElement("li",{key:"marker-".concat(t)},r.a.createElement("div",{className:"markertitle"},"".concat(a)),r.a.createElement("div",{className:"markernumber"},r.a.createElement("span",{onClick:m},"".concat(g(c))))):r.a.createElement("li",{key:"player-".concat(t),className:"".concat(s&&b?"reveal":"")},r.a.createElement("div",{className:"line"}),r.a.createElement("div",{className:"title",onClick:function(){s&&(f(!0),v&&(clearTimeout(v),v=null),v=setTimeout((function(){return f(!1)}),5e3))}},"".concat(b?a:"Tap to reveal")),r.a.createElement("div",{className:"number"},r.a.createElement("span",{onClick:m},"".concat(g(c))),r.a.createElement("span",{onClick:m},"".concat(g(l)))))},h=a.p+"static/media/dinner.029cd2f5.png",E=function(e,t){var a=localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(n){console.error("Can't parse value from localstorage, using default",n)}return t},y=function(e,t){localStorage.setItem(e,JSON.stringify(t))};var O=function(){var e={name:""},t=E("playerList",[Object(s.a)({},e),Object(s.a)({},e),Object(s.a)({},e)]),a=E("allocations",[]),c=E("gameOptions",{slotsPerPlayer:2,gameLength:5400}),l=E("viewOptions",{minutes:!1,surprise:!1}),f=!!a.length,O=Object(n.useState)(t),j=Object(i.a)(O,2),k=j[0],w=j[1],N=Object(n.useState)(a),C=Object(i.a)(N,2),P=C[0],S=C[1],x=Object(n.useState)(!f),A=Object(i.a)(x,2),T=A[0],W=A[1],L=Object(n.useState)(f),I=Object(i.a)(L,2),M=I[0],R=I[1],F=Object(n.useState)(c),J=Object(i.a)(F,2),U=J[0],B=J[1],G=Object(n.useState)(l),H=Object(i.a)(G,2),$=H[0],q=H[1],z=function(e){y("playerList",e),w(e)},D=function(e){z(k.filter((function(t,a){return a!==parseInt(e.currentTarget.dataset.idx)})))},K=function(e){var t=Object(o.a)(k);t[e.target.dataset.idx][e.target.className]=e.target.value,z(t)},Q=function(){var e=Object(s.a)(Object(s.a)({},$),{},{minutes:!$.minutes});y("viewOptions",e),q(e)},V=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:h,className:"App-logo",alt:"dinner"})),T?r.a.createElement("div",null,r.a.createElement("p",null,"Who's playing?"),k.map((function(e,t){return r.a.createElement(v,{key:"player-".concat(t),idx:t,player:e,onPlayerChange:K,onRemovePlayer:D})})),r.a.createElement("div",{className:"buttonrow"},r.a.createElement("button",{type:"button",onClick:function(){z([].concat(Object(o.a)(k),[Object(s.a)({},e)]))}},r.a.createElement(u.a,null)),r.a.createElement("button",{type:"button",onClick:function(){W(!1)}},r.a.createElement(m.a,null)))):r.a.createElement("div",null,!M&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Ready to play?"),r.a.createElement("div",null,k.map((function(e){return e.name})).join(", ")),r.a.createElement("div",{className:"buttonrow"},r.a.createElement("label",{htmlFor:"slots"},"Slots per player: ",U.slotsPerPlayer),r.a.createElement("input",{type:"range",id:"slots",min:"1",max:"3",value:U.slotsPerPlayer,onChange:function(e){var t=Object(s.a)(Object(s.a)({},U),{},{slotsPerPlayer:parseInt(e.target.value)});y("gameOptions",t),B(t)},className:"slider"})),r.a.createElement("div",{className:"controlrow"},r.a.createElement("label",{htmlFor:"len"},"Game length (mins) "),r.a.createElement("input",{type:"number",id:"len",min:"1",step:"1",value:U.gameLength/60,onChange:function(e){var t=Object(s.a)(Object(s.a)({},U),{},{gameLength:60*parseInt(e.target.value)});y("gameOptions",t),B(t)},className:"shortnumber"})),r.a.createElement("div",{className:"controlrow"},r.a.createElement("label",null,"Surprise mode "),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",checked:$.surprise,onChange:function(e){var t=Object(s.a)(Object(s.a)({},$),{},{surprise:!!e.target.checked});y("viewOptions",t),q(t)}}),r.a.createElement("span",{className:"toggle"}))),r.a.createElement("div",{className:"buttonrow"},r.a.createElement("button",{type:"button",onClick:function(){W(!0)}},r.a.createElement(d.a,null)),r.a.createElement("button",{type:"button",onClick:function(){R(!0);var e=k.length,t=U.slotsPerPlayer,a=U.gameLength,n=e*t,r=V(Object(o.a)(Array(n)).map((function(t,a){return a%e}))),c=a/2,l={start:c,end:c,label:"Half Time",type:"marker"},i=Math.round(a/n),u=r.reduce((function(e,t,a){return[].concat(Object(o.a)(e),[{start:a*i,end:(a+1)*i,type:"allocation"}])}),[]);u[n-1].end=a;var m=u.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{label:k[r[t]].name})})),d=m.findIndex((function(e){return e.start<c&&e.end>c}));if(~d){var p=m.slice(0,d),b=m.slice(d+1),f=Object(s.a)(Object(s.a)({},m[d]),{},{end:c,type:"allocation split"}),v=Object(s.a)(Object(s.a)({},m[d]),{},{start:c,type:"allocation split"});m=[].concat(Object(o.a)(p),[f,l,v],Object(o.a)(b))}else m=[].concat(Object(o.a)(m.slice(0,m.length/2)),[l],Object(o.a)(m.slice(m.length/2)));y("allocations",m),S(m)}},r.a.createElement(p.a,null)))),M&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"timeline"},r.a.createElement("ul",null,P.map((function(e,t){var a=e.label,n=e.start,c=e.end,l=e.type;return r.a.createElement(g,{key:"row-".concat(t),label:a,start:n,end:c,type:l,idx:t,surprise:$.surprise,mode:$.minutes?"minutes":"clock",onTimeClick:Q})})))),r.a.createElement("div",{className:"buttonrow"},r.a.createElement("button",{type:"button",onClick:function(){R(!1)}},r.a.createElement(b.a,null))))))},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(O,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");j?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(t,e)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.051aa81d.chunk.js.map